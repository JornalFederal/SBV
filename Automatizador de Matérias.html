<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerar Arquivo HTML</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>Jornal Estudantil IFSP São João da Boa Vista</h1>
            <nav>
                <ul>
                    <li><a href="index.html">Início</a></li>
                    <li><a href="todas-noticias.html">Notícias</a></li>
                    <li><a href="index.html#eventos">Eventos</a></li>
                    <li><a href="sobre.html">Sobre</a></li>
                    <li><a href="sugestoes.html">Sugestões</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="container">
        <h1>Gerar Arquivo HTML de Matéria</h1>

        <!-- Inputs para o título, conteúdo, URL da imagem, autor e data -->
        <label for="titulo">Título da Matéria:</label>
        <input type="text" id="titulo" placeholder="Digite o título da matéria"><br><br>

        <label for="conteudo">Conteúdo da Matéria:</label>
        <textarea id="conteudo" placeholder="Digite o conteúdo da matéria"></textarea><br><br>

        <label for="imagem">URL da Imagem (opcional):</label>
        <input type="text" id="imagem" placeholder="Cole a URL da imagem"><br><br>

        <label for="autor">Autor:</label>
        <input type="text" id="autor" placeholder="Digite o nome do autor"><br><br>

        <label for="data">Data de Publicação:</label>
        <input type="date" id="data"><br><br>

        <button onclick="gerarHTML()">Gerar HTML</button>

        <article id="preview">
            <!-- O conteúdo gerado será exibido aqui -->
        </article>
    </section>

    <footer>
        <div class="container">
            <p>&copy; 2024 Jornal Estudantil IFSP São João da Boa Vista. Todos os direitos reservados.</p>
        </div>
    </footer>

    <script>
        function gerarHTML() {
            // Captura os valores dos inputs
            const titulo = document.getElementById('titulo').value;
            const conteudo = document.getElementById('conteudo').value;
            const imagemUrl = document.getElementById('imagem').value;
            const autor = document.getElementById('autor').value || "Autor desconhecido"; // Valor padrão
            const data = document.getElementById('data').value || new Date().toLocaleDateString('pt-BR'); // Valor padrão (data atual)

            // Gera o conteúdo HTML
            let htmlContent = `
            <!DOCTYPE html>
            <html lang="pt-BR">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>${titulo}</title>
                <link rel="stylesheet" href="styles.css">
            </head>
            <body>
                <header>
                    <div class="container">
                        <h1>Jornal Estudantil IFSP São João da Boa Vista</h1>
                        <nav>
                            <ul>
                                <li><a href="index.html">Início</a></li>
                                <li><a href="todas-noticias.html">Notícias</a></li>
                                <li><a href="index.html#eventos">Eventos</a></li>
                                <li><a href="sobre.html">Sobre</a></li>
                                <li><a href="sugestoes.html">Sugestões</a></li>
                            </ul>
                        </nav>
                    </div>
                </header>
                <section class="container">
                    <article>
                        <h2>${titulo}</h2>
                        <p><strong>Publicado em:</strong> ${new Date(data).toLocaleDateString('pt-BR')}</p>`;
            
            // Se a imagem tiver uma URL, inclui a tag <img> acima do conteúdo
            if (imagemUrl) {
                htmlContent += `<img src="${imagemUrl}" alt="${titulo}" style="max-width:100%; height:auto;"><br><br>`;
            }

            // Adiciona o conteúdo abaixo da imagem
            htmlContent += `<p>${conteudo}</p>`;
            
            htmlContent += `
                        <p><strong>Autor:</strong> ${autor}</p><br>
                    </article>
                    <div class="center"><a href="index.html#noticias" class="button">Voltar para Notícias</a></div>
                </section>
                <footer>
                    <div class="container">
                        <p>&copy; 2024 Jornal Estudantil IFSP São João da Boa Vista. Todos os direitos reservados.</p>
                    </div>
                </footer>
            </body>
            </html>`;

            // Cria o blob de dados do arquivo
            const blob = new Blob([htmlContent], { type: 'text/html' });
            
            // Cria o link para download do arquivo
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `${titulo.replace(/\s+/g, '_')}.html`; // Nome do arquivo com base no título
            link.click();

            // Exibe uma prévia do HTML gerado
            document.getElementById('preview').innerHTML = `
                <h2>Prévia:</h2>
                <h3>${titulo}</h3>
                <p><strong>Publicado em:</strong> ${new Date(data).toLocaleDateString('pt-BR')}</p>
                ${imagemUrl ? `<img src="${imagemUrl}" alt="${titulo}" style="max-width:100%; height:auto;"><br><br>` : ''}
                <p>${conteudo}</p>
                <p><strong>Autor:</strong> ${autor}</p>
            `;
        }
    </script>

</body>
</html>
